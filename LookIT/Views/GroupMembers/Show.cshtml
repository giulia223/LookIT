

@using Microsoft.AspNetCore.Identity
@using LookIT.Models
@inject UserManager<ApplicationUser> UserManager

@* Fundal gri deschis specific FB *@
<div style="background-color: #f0f2f5; min-height: 100vh; padding-top: 30px; padding-bottom: 50px;">
    <div class="container">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <h3 class="fw-bold" style="color: #1c1e21;">Your groups</h3>
            <a class="btn btn-primary d-flex align-items-center" asp-controller="Groups" asp-action="New"
               style="background-color: #1877f2; border: none; font-weight: 600; border-radius: 6px; padding: 8px 16px;">
                <i class="bi bi-plus-circle me-2"></i> Create new group
            </a>
        </div>

        @if (ViewBag.message != null)
        {
            <div class="alert rounded-3 text-center mb-4 shadow-sm"
                 style="background-color: #90C67F; color: white; border: none;">
                @ViewBag.message
            </div>
        }

        <div class="row">
            @foreach (var groupEntry in ViewBag.GroupsUser)
            {
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="card h-100 shadow-sm border-0 group-card-fb" style="border-radius: 12px; transition: all 0.3s ease;">

                        @* Partea de sus colorata (Header vizual) *@
                        <div style="height: 80px; background: linear-gradient(135deg, #92E4BA 0%, #90C67F 100%); border-radius: 12px 12px 0 0;"></div>

                        <div class="card-body mt-n4">
                            @* Avatar Grup (Initiala numelui) *@
                            <div class="bg-white rounded-circle d-flex align-items-center justify-content-center shadow-sm mb-3"
                                 style="width: 60px; height: 60px; margin-top: -30px; border: 3px solid white;">
                                <span class="fw-bold" style="color: #845763; font-size: 1.5rem;">
                                    @groupEntry.Group.GroupName.Substring(0, 1).ToUpper()
                                </span>
                            </div>

                            @* Detalii Grup *@
                            <h5 class="card-title fw-bold" style="color: #050505;">@groupEntry.Group.GroupName</h5>
                            <p class="card-text text-muted small" style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; height: 40px;">
                                @groupEntry.Group.Description
                            </p>

                            <div class="d-flex align-items-center mb-3 text-muted" style="font-size: 0.85rem;">
                                <i class="bi bi-people-fill me-2"></i>
                                <span>Membru activ</span>
                            </div>

                            @* Buton Actiune *@
                            <div class="d-grid mt-auto">
                                <a class="btn btn-light fw-bold" asp-controller="Groups" asp-action="Show" asp-route-id="@groupEntry.GroupId"
                                   style="background-color: #e7f3ff; color: #1877f2; border: none; border-radius: 6px;">
                                    Vezi detalii
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        @if (ViewBag.GroupsUser == null || ViewBag.GroupsCount == 0)
        {
            <div class="text-center mt-5">
                <i class="bi bi-grid-3x3-gap" style="font-size: 4rem; color: #bcc0c4;"></i>
                <p class="text-muted mt-3">Nu ești înscris în niciun grup încă.</p>
            </div>
        }
    </div>
</div>

<style>
    .group-card-fb:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1) !important;
    }

    .mt-n4 {
        margin-top: -1.5rem !important;
    }

    /* Link-urile de navigare sa nu aiba sublinere */
    a {
        text-decoration: none;
    }
</style>

@* Asigura-te ca ai Bootstrap Icons in Layout *@
