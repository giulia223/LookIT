@if (ViewBag.Message != null)
{
    <h2 class="p-3 rounded-3 text-center mb-5 alert @ViewBag.Alert">@ViewBag.Message</h2>
}
<br />

@foreach (var post in ViewBag.Posts)
{
    <div class="card mb-4 mx-auto border-0 shadow-sm" style="max-width: 600px;">
        <div class="card-body p-3">

            <div class="d-flex align-items-center mb-3">
                <img src="@(post.Author.ProfilePictureUrl ?? "/images/profile/default_user.jpg")"
                     alt="Profile Picture"
                     class="rounded-circle border"
                     style="width: 40px; height: 40px; object-fit: cover;" />

                <div class="d-flex flex-column ms-2">
                    <span class="fw-bold text-dark" style="font-size: 0.95rem; line-height: 1.2;">
                        @post.Author.FullName
                    </span>
                    <small class="text-muted" style="font-size: 0.8rem;">
                        @post.Date.ToString(post.Date.Year == DateTime.Now.Year ? "d MMMM HH:mm" : "d MMMM yyyy HH:mm") <i class="bi bi-globe"></i>
                    </small>
                </div>
            </div>

            <div>
                @if (!string.IsNullOrEmpty(post.TextContent))
                {
                    <div class="mb-2">
                        @post.TextContent
                    </div>
                }

                @if (post.ImageUrl != null)
                {
                    <img src="@post.ImageUrl"
                         alt="Post Image"
                         class="rounded-2 w-100 border"
                         style="height: auto; max-height: 600px; object-fit: contain;" />
                }
            </div>

            @if (post.VideoUrl != null)
            {
                <div class="mt-2">
                    <video controls preload="metadata" class="w-100 rounded-2 border" style="max-height: 600px; background-color: #000;">
                        <source src="@post.VideoUrl" type="video/mp4">
                        Browserul tău nu suportă redarea acestui videoclip.
                    </video>
                </div>
            }

            <div class="mt-3">
                <a asp-controller="Posts" asp-action="Show" asp-route-id="@post.PostId"
                   class="btn btn-sm btn-primary">
                    Vezi postarea >>
                </a>
            </div>

        </div>
    </div>
}